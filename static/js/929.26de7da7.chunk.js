"use strict";(self.webpackChunkjs_wallet_sdk_brc20_demo=self.webpackChunkjs_wallet_sdk_brc20_demo||[]).push([[929],{5439:(e,i,s)=>{s.d(i,{M:()=>l});var n=s(4294),t=s(184);const l=e=>{let{buttonText:i,onClick:s,disabled:l=!1,testId:a=""}=e;return(0,t.jsx)(n.Z,{size:"small",variant:"contained",sx:{backgroundColor:"black",borderRadius:2},onClick:s,disabled:l,"data-testid":a,children:i})}},233:(e,i,s)=>{s.d(i,{d:()=>c});var n=s(5289),t=s(5661),l=s(9157),a=s(1691),r=s(7123),d=s(4294),o=s(184);const c=e=>{let{title:i,content:s,closeButtonText:c="No",confirmButtonText:x="Yes",showDialog:u=!1,handleClose:p,handleConfirm:h}=e;return(0,o.jsxs)(n.Z,{open:u,onClose:p||h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(t.Z,{id:"alert-dialog-title",children:i}),(0,o.jsx)(l.Z,{children:(0,o.jsx)(a.Z,{id:"alert-dialog-description",children:s})}),(0,o.jsxs)(r.Z,{children:[p&&(0,o.jsx)(d.Z,{onClick:p,children:c}),(0,o.jsx)(d.Z,{onClick:h,autoFocus:!0,children:x})]})]})}},3929:(e,i,s)=>{s.r(i),s.d(i,{default:()=>S});var n=s(2791),t=s(7257),l=s(7621),a=s(9504),r=s(890),d=s(7924),o=s(1889),c=s(3400),x=s(2363),u=s(4070),p=s(7317),h=s(194),v=s(1004),j=s(5439),g=s(4215),b=s(8255),y=s(6954),w=s(184);const m=e=>{let{setCoinType:i,setNetwork:s,setSegwitType:n}=e;const{walletStore:t}=(0,y.oR)(),l=t.coinTypeMapping.map((e=>({network:e.network,label:`${e.network} - ${e.label}`,value:e.label})));return(0,w.jsx)(g.Z,{options:l,sx:{width:288,py:1,pr:1},renderInput:e=>(0,w.jsx)(b.Z,{...e,label:"Coin Type"}),onChange:(e,t)=>{i(null===t||void 0===t?void 0:t.value),s("BTC"===(null===t||void 0===t?void 0:t.network)?null===t||void 0===t?void 0:t.network:void 0),"BTC"!==(null===t||void 0===t?void 0:t.network)&&n()},isOptionEqualToValue:(e,i)=>e.value===i.value,groupBy:e=>e.network,"data-testid":"autocomplete-coin-type",defaultValue:l[0]})},Z=e=>{let{setSegwitType:i}=e;const s=[{label:"legacy",value:void 0,enumValue:0},{label:"segwit_native",value:"segwit_native",enumValue:3},{label:"segwit_nested",value:"segwit_nested",enumValue:1},{label:"segwit_nested_49",value:"segwit_nested_49",enumValue:2},{label:"segwit_taproot",value:"segwit_taproot",enumValue:4}];return(0,w.jsx)(g.Z,{options:s,sx:{width:288,py:1,pr:1},renderInput:e=>(0,w.jsx)(b.Z,{...e,label:"Segwit Type"}),onChange:(e,s)=>{i(s)},isOptionEqualToValue:(e,i)=>!e.value||e.value===i.value,groupBy:e=>e.network,"data-testid":"autocomplete-segwit",defaultValue:s[0]})};var k=s(233),T=s(7247),f=s(9581);const C=(0,t.Pi)((e=>{let{walletInfo:i,index:s,callback:n}=e;const{appStore:t,walletStore:l}=(0,y.oR)();return(0,w.jsxs)("div",{children:[(0,w.jsxs)(u.Z,{severity:"success","data-testid":`wallet-info-${s}`,children:[(0,w.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(o.ZP,{item:!0,xs:!0,children:(0,w.jsx)(p.Z,{children:"Success"})}),(0,w.jsxs)(o.ZP,{item:!0,children:[(0,w.jsx)(c.Z,{onClick:()=>((e,i,s)=>{let n=s.getWallet(e.coinType);n?n.validAddress({address:e.address})?(i.snackBarMessage="Address is valid",i.openSnackBar=!0):(i.snackBarMessage="Address is invalid",i.openSnackBar=!0):(i.snackBarMessage="No such wallet",i.openSnackBar=!0)})(i,t,l),children:(0,w.jsx)(f.Z,{fontSize:"small"})}),(0,w.jsx)(c.Z,{onClick:()=>((e,i)=>{navigator.clipboard.writeText(JSON.stringify(e)),i.snackBarMessage="Copied to clipboard",i.openSnackBar=!0})(i,t),children:(0,w.jsx)(h.Z,{fontSize:"small"})}),(0,w.jsx)(c.Z,{onClick:()=>((e,i)=>{i.snackBarMessage="Address deleted",i.openSnackBar=!0,e()})(n,t),children:(0,w.jsx)(T.Z,{fontSize:"small"})})]})]}),i.coinType&&(0,w.jsx)("div",{children:`Chain: ${i.coinType}`}),i.chainId?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Chain ID: ${i.chainId}`})]}):null,i.segwitType&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Segwit Type: ${i.segwitType}`})]}),i.derivedPath&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Derivation Path: ${i.derivedPath}`})]}),i.privateKey&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Private Key: ${i.privateKey}`})]}),i.address&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Address: ${i.address}`})]}),i.publicKey&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("div",{children:`Public Key: ${i.publicKey}`})]})]}),(0,w.jsx)(d.Z,{flexItem:!0},"divider")]})})),S=(0,t.Pi)((()=>{const[e,i]=(0,n.useState)("BTC"),[s,t]=(0,n.useState)(),[g,b]=(0,n.useState)(),[T,f]=(0,n.useState)(""),[S,B]=(0,n.useState)(!1),{walletStore:I,appStore:_}=(0,y.oR)(),{isInit:P,walletInfos:M,chainsAvailable:K}=I,{walletId:V}=_;(0,n.useEffect)((()=>{i("BTC"),t(),b(),f(""),B(!1)}),[P]);return P?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(l.Z,{variant:"outlined",sx:{minWidth:275,borderRadius:5},children:[(0,w.jsx)(a.Z,{sx:{pb:1},children:(0,w.jsx)(r.Z,{sx:{fontSize:26},children:"Generate Mnemonic"})}),(0,w.jsx)(d.Z,{flexItem:!0}),(0,w.jsx)(a.Z,{sx:{pb:0},children:(0,w.jsx)(r.Z,{sx:{fontSize:20,pb:1},children:"Mnemonic"})}),(0,w.jsx)(a.Z,{sx:{py:1,mx:2,borderRadius:2,backgroundColor:"#f7f7f7"},children:(0,w.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(o.ZP,{item:!0,xs:!0,children:g?(0,w.jsx)(r.Z,{sx:{minHeight:24,fontSize:16},children:g}):(0,w.jsx)(r.Z,{sx:{minHeight:24,fontSize:16,color:"#929292"},children:'Click "Generate Mnemonic" to randomly generate mnemonic'})}),(0,w.jsx)(o.ZP,{item:!0,children:g?(0,w.jsx)(c.Z,{onClick:()=>((e,i)=>{navigator.clipboard.writeText(e),i.snackBarMessage="Copied to clipboard",i.openSnackBar=!0})(g,_),children:(0,w.jsx)(h.Z,{})}):null})]})}),(0,w.jsx)(x.Z,{sx:{p:2},children:(0,w.jsx)(j.M,{buttonText:"Generate Mnemonic",onClick:async()=>{try{const e=await v.bip39.generateMnemonic();b(e)}catch(e){console.error(e)}},disabled:!P||!!g||!!V,testId:"generate-mnemonic"})}),!!g&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.Z,{sx:{pb:0},children:(0,w.jsx)(r.Z,{sx:{fontSize:20},children:"Coin Type"})}),(0,w.jsxs)(x.Z,{sx:{pl:2,pr:2,pb:2},children:[(0,w.jsx)(m,{setCoinType:i,setSegwitType:t}),(0,w.jsx)(Z,{setSegwitType:t}),(0,w.jsx)(j.M,{buttonText:"Derive Address",onClick:async()=>{if(e)if(M.findIndex((i=>i.coinType===e&&i.segwitType===(null===s||void 0===s?void 0:s.value)))>-1)B(!0);else try{f("");let n=I.getWallet(e);if(n){var i;const t={index:0};null!==s&&void 0!==s&&s.enumValue&&Object.assign(t,{segwitType:null===s||void 0===s?void 0:s.enumValue}),console.log(t);const l=await n.getDerivedPath(t),a=await n.getDerivedPrivateKey({mnemonic:g,hdPath:l}),r={privateKey:a};null!==s&&void 0!==s&&s.value&&Object.assign(r,{addressType:"segwit_nested_49"===(null===s||void 0===s?void 0:s.value)?"segwit_nested":null===s||void 0===s?void 0:s.value});const d=await n.getNewAddress(r),o={chainId:K?null===(i=K.find((i=>i.name===e)))||void 0===i?void 0:i.chainId:"BTC"===e?0:1,coinType:e,segwitType:s?s.value:void 0,derivedPath:l,privateKey:a,address:d.address};d.publicKey&&Object.assign(o,{publicKey:d.publicKey}),I.setWalletInfos([o,...M])}}catch(n){console.error(n),f(n.toString())}else f("Please select a coin type!")},disabled:!P||!g||!e,testId:"derive-address"})]}),T&&(0,w.jsxs)(u.Z,{severity:"error",children:[(0,w.jsx)(p.Z,{children:"Failure"}),T]}),M&&M.map(((e,i)=>e?(0,w.jsx)(C,{walletInfo:e,index:i,callback:()=>(e=>{I.setWalletInfos(M.toSpliced(e,1))})(i)},`wallet-info-${i}`):null))]})]},"generate-mnemonic-card"),(0,w.jsx)(k.d,{title:"Already created",content:"The Private Key is already created, please try other coin types!",showDialog:S,handleConfirm:()=>{B(!1)}})]}):null}))}}]);
//# sourceMappingURL=929.26de7da7.chunk.js.map